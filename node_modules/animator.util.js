var Path = require("path");
var FS = require("fs");

exports.curDir = function(path) {
    if (typeof path === 'undefined') path = '';

    var curpath = window.location.pathname;
    return Path.join(Path.dirname(curpath), path);
};

exports.listDirs = function(abspath) {
    var dirs = [];
    var files = FS.readdirSync(abspath);
    files.forEach(
        function(filename) {
            var file = Path.join(abspath, filename);
            var stat = FS.statSync(file);
            if (stat.isDirectory()) {
                dirs.push(file);
            }
        }
    );
    dirs.sort();
    return dirs;
};

exports.listFiles = function(abspath, ext) {
    var dirs = [];
    var files = FS.readdirSync(abspath);
    files.forEach(
        function(filename) {
            var file = Path.join(abspath, filename);
            var stat = FS.statSync(file);
            var filenameExt = filename.substr(filename.length - ext.length);
            if (!stat.isDirectory() && filenameExt == ext) {
                dirs.push(file);
            }
        }
    );
    dirs.sort();
    return dirs;
};